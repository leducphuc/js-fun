{"version":3,"sources":["Promise.js","ex1.js"],"names":["PENDING","FULFILLED","REJECTED","_Promise","func","status","value","handlers","resolve","bind","then","reject","catch","params","callback","console","log","cbType","fakeAjax","url","cb","fake_responses","randomDelay","Math","round","random","setTimeout","output","text","getFile","file","out1","start","Date","now","result"],"mappings":"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","file":"ex1.a1e706d4.map","sourceRoot":"..","sourcesContent":["const PENDING = 0;\nconst FULFILLED = 1;\nconst REJECTED = 2;\n\nexport default class _Promise {\n    constructor(func) {\n        this.func = func;\n        this.status = PENDING;\n        this.value = null;\n        this.handlers = [];\n        this.resolve = this.resolve.bind(this);\n        this.then = this.then.bind(this);\n        this.reject = this.reject.bind(this);\n        this.catch = this.catch.bind(this);\n        func(this.resolve, this.reject);\n    }\n\n    resolve(params) {\n        this.status = FULFILLED;\n        this.value = params;\n        return this;\n    }\n\n    reject(params) {\n        this.status = REJECTED;\n        return this;\n    }\n\n    then(callback) {\n        console.log('inside then');\n        const cbType = typeof callback;\n        if (cbType === 'function') {\n            if (this.status === PENDING) {\n                this.value = callback(this.value);\n                return this;\n            } else if (this.status === FULFILLED) {\n                this.value = callback(this.value);\n                return this;\n            }\n        }\n        return this;\n    }\n\n    catch(callback) {\n        if (this.status = REJECTED) {\n           this.value = callback(this.value);\n           return this;\n        }\n        return this;\n    }\n\n    done() {\n    }\n\n    finnaly() {\n    }\n\n    doResolve() {\n    }\n}","import _Promise from './Promise';\nfunction fakeAjax(url,cb) {\n\tvar fake_responses = {\n\t\t\"file1\": \"The first text\",\n\t\t\"file2\": \"The middle text\",\n\t\t\"file3\": \"The last text\"\n\t};\n\tvar randomDelay = (Math.round(Math.random() * 1E4) % 8000) + 1000;\n\n\tconsole.log(\"Requesting: \" + url, randomDelay);\n\n\treturn new _Promise((resolve, reject) => {\n\t\t setTimeout(function(){\n\t\t\tresolve(fake_responses[ url ]);\n\t\t\t// try {\n\t\t\t// \tif (randomDelay > 1600) throw new Error();\n\t\t\t// \tresolve(fake_responses[ url ]);\n\t\t\t// }\n\t\t\t//  catch (error) {\n\t\t\t// \treturn Promise.resolve((fakeAjax( url )));\n\t\t\t// }\n\t\t},randomDelay);\n\t})\n}\n\nfunction output(text) {\n\tconsole.log(text);\n}\n\n// **************************************\n// The old-n-busted callback way\n\nfunction getFile(file) {\n\treturn fakeAjax(file)\n}\n\n\nconst out1 = () => console.log('aha');\n\n// request all files at once in \"parallel\"\nconst start = Date.now();\n// const result = () => Promise.all([getFile(\"file1\"), getFile(\"file2\"), getFile(\"file3\")]).then(([x,y,z]) => {\n// \tconsole.log(x);\n// \tconsole.log(y);\n// \tconsole.log(z);\n// \tout1;\n// \tconsole.log(Date.now() - start);\n// }).catch(() => console.log('error'));\n// result();\n\nconst result = () => getFile(\"file1\").then(out1)\n// .catch(() => console.log('1234'))\nconsole.log(result());\n"]}